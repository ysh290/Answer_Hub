<scroll-view class="square" scroll-y>
  <view class="filters">
    <picker mode="selector" range="{{examTypes}}" value="{{examTypeIndex}}" bindchange="onExamTypeChange">
      <view class="filter-item">{{examTypes[examTypeIndex]}}</view>
    </picker>
    <picker mode="selector" range="{{subjects}}" value="{{subjectIndex}}" bindchange="onSubjectChange">
      <view class="filter-item">{{subjects[subjectIndex]}}</view>
    </picker>
    <picker mode="selector" range="{{stages}}" value="{{stageIndex}}" bindchange="onStageChange">
      <view class="filter-item">{{stages[stageIndex]}}</view>
    </picker>
  </view>

  <block wx:for="{{list}}" wx:key="id">
    <view class="card" bindtap="goToDetail" data-id="{{item.id}}">
      <view class="card-header">
        <image class="avatar" src="{{item.userDo.avatar || '/static/人.png'}}"></image>
        <view class="meta">
          <text class="name">{{item.userDo.userName ||'未知用户'}}</text>
          <text class="time">{{item.posts.createTime || '刚刚'}}</text>
        </view>
        <text class="tag">{{item.posts.askSubject || '未知'}}</text>
      </view>
      <view class="content">{{item.posts.question || '暂无内容'}}</view>
      <!-- 单图显示 -->
      <view wx:if="{{item.askImages && item.askImages.length}}">
        <view wx:for="{{item.askImages}}" wx:key="index">
         <image class="qimg" src="{{item.imageUrl}}" mode="widthFix"></image>
        </view>
      </view>
      
      <view class="actions">
        <text class="action" bindtap="likePost">👍 {{item.likes || 0}}</text>
        <text class="action">💬 {{item.comments || 0}}</text>
        <text class="action">⭐ {{item.collections || 0}}</text>
        <view class="issolved" wx:if="{{item.issolved}}">已解答</view>
        <view class="notsolved" wx:elif="{{!item.issolved}}">未解答</view>
      </view>
    </view>
  </block>

  <view wx:if="{{!list.length}}" class="empty">暂无数据</view>
</scroll-view>

